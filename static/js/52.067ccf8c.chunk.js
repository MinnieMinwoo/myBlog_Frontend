"use strict";(self.webpackChunkmyblog_frontend=self.webpackChunkmyblog_frontend||[]).push([[52],{8052:function(e,n,t){t.r(n);var a=t(4165),r=t(5861),s=t(9439),c=t(3433),i=t(7313),l=t(8467),o=t(3403),u=t(2495),d=t(1921),h=t(2250),m=t(9235),p=t(4646),x=t(9105),f=t(3931),b=t(6417),g=function(){return(0,b.jsxs)("div",{"aria-hidden":"true",children:[(0,b.jsx)("section",{className:"w-100 bg-secondary px-4 mb-4 h-340px",children:(0,b.jsxs)("div",{className:"pt-140px",children:[(0,b.jsx)("h2",{className:"placeholder d-block col-5"}),(0,b.jsx)("p",{className:"placeholder col-4"})]})}),(0,c.Z)(Array(3)).map((function(e,n){return(0,b.jsxs)("div",{className:"mb-3 d-flex vstack gap-1 placeholder-wave placeholder-lg",children:[(0,b.jsx)("hr",{}),(0,b.jsx)("h3",{className:"placeholder col-3 bg-secondary"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"placeholder col-11 bg-secondary"}),(0,b.jsx)("p",{className:"placeholder col-12 bg-secondary"}),(0,b.jsx)("p",{className:"placeholder col-8 bg-secondary"})]}),(0,b.jsx)("span",{className:"placeholder col-2 bg-secondary"})]},n)}))]})};n.default=function(){var e=(0,o.FV)(u.B),n=(0,s.Z)(e,2),t=n[0],j=n[1],v=(0,i.useState)(""),N=(0,s.Z)(v,2),w=N[0],y=N[1],Z=(0,i.useState)([]),k=(0,s.Z)(Z,2),I=k[0],D=k[1],L=(0,i.useState)(0),S=(0,s.Z)(L,2),U=S[0],B=S[1],F=(0,d.p)().openToast,P=(0,l.UO)();(0,i.useEffect)((function(){j(!0);var e=P.mainName,n=P.subName;if(!(P.userID&&e&&n))throw console.log("no params");(0,h.d3)(P.userID).then(function(){var t=(0,r.Z)((0,a.Z)().mark((function t(r){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,p.dZ)(r,e,n).then((function(e){return y(e)})),(0,m.s$)(r,e,n).then((function(e){return B(e)})),(0,m.yB)(r,e,n).then((function(e){var n=e.data,t=e.index;D(n),T.current=t,10!==n.length&&J(!0)}))]);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e),F("Error","Post loading failed.","warning")})).finally((function(){j(!1)}))}),[]);var R=(0,i.useState)(!1),C=(0,s.Z)(R,2),E=C[0],O=C[1],_=(0,i.useState)(!1),A=(0,s.Z)(_,2),M=A[0],J=A[1],T=(0,i.useRef)(),V=(0,i.useRef)(null),Y=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){var t,r,s,i,l,o,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=P.userID,r=P.mainName,s=P.subName,t&&r&&s){e.next=3;break}return e.abrupt("return");case 3:if(n[0].isIntersecting&&T.current){e.next=5;break}return e.abrupt("return");case 5:if(!E&&!M){e.next=7;break}return e.abrupt("return");case 7:return O(!0),e.next=10,(0,h.d3)(t);case 10:return i=e.sent,e.next=13,(0,m.yB)(i,r,s,T.current);case 13:l=e.sent,o=l.index,u=l.data,D((function(e){return[].concat((0,c.Z)(e),(0,c.Z)(u))})),T.current=o,10!==u.length&&J(!0),O(!1);case 20:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){var e=new IntersectionObserver(Y,{rootMargin:"100px",threshold:.1}),n=V.current;return n&&e.observe(n),function(){n&&e.unobserve(n)}}),[V.current]),(0,b.jsx)(b.Fragment,{children:t?(0,b.jsx)(g,{}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("main",{className:"read_section",hidden:t,children:[(0,b.jsxs)("section",{className:"bg-image w-100 bg-opacity-50 px-4 mb-4 h-340px text-eee",style:{background:"linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)),\n                url(".concat(w||f,") center/cover no-repeat")},children:[(0,b.jsx)("h2",{className:"fs-1 fw-middle mb-3 pt-140px text-white",children:"".concat(P.mainName," - ").concat(P.subName)}),(0,b.jsx)("span",{className:"fs-5 text-white",children:"".concat(U," ").concat(I.length&&1!==I.length?"posts":"post")})]}),(0,b.jsx)(x.Z,{postList:I})]}),(0,b.jsx)("div",{id:"pagination",className:"spinner-border text-secondary",style:{marginLeft:"47%",display:"".concat(M||t?"none":"block")},ref:V,role:"status",children:(0,b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]})})}},9105:function(e,n,t){t(7313);var a=t(8467),r=t(2135),s=t(3403),c=t(2495),i=t(8433),l=t(6417);n.Z=function(e){var n=e.postList,t=(0,a.UO)(),o=(0,s.sJ)(c.B),u=function(e){e.preventDefault()};return(0,l.jsx)("article",{className:"PostItemList vstack",hidden:o,children:n.map((function(e){return(0,l.jsx)("div",{className:"w-100",children:(0,l.jsx)(r.rU,{className:"PostItem px-0 py-4 d-flex text-decoration-none bt-light",to:"/home/".concat(t.userID,"/").concat(e.id),children:(0,l.jsxs)("div",{className:"vstack gap-1",children:[""!==e.thumbnailImageURL?(0,l.jsx)("div",{className:"w-100 ratio ratio-16x9 mb-3",children:(0,l.jsx)("img",{className:"img-fluid object-fit-cover",src:e.thumbnailImageURL,alt:"post"})}):null,(0,l.jsx)("h3",{className:"overflow-hidden fw-semibold text-111",children:e.title}),(0,l.jsx)("p",{className:"mb-1 text-break text-555",children:e.thumbnailData}),(0,l.jsx)("div",{className:"col",children:e.tag.map((function(e){return(0,l.jsx)("button",{className:"btn btn-outline-primary",onClick:u,children:e},e)}))}),(0,l.jsx)("span",{className:"fs-14px text-999",children:(0,i.Z)(e.createdAt)})]})},e.id)},e.id)}))})}},8433:function(e,n){n.Z=function(e){var n=new window.Date(e),t=n.getFullYear(),a=("0"+(1+n.getMonth())).slice(-2),r=("0"+n.getDate()).slice(-2);return"".concat(t,". ").concat(a,". ").concat(r)}}}]);