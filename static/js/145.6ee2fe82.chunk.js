"use strict";(self.webpackChunkmyblog_frontend=self.webpackChunkmyblog_frontend||[]).push([[145],{2552:function(e,n,t){var a,r=t(168),l=(t(7313),t(6233)),s=t(6365),i=t(7440),o=t(244),c=t(6417),u=(0,o.ZP)(s.Z.Dialog)(a||(a=(0,r.Z)(["\n  margin: 0;\n"])));n.Z=function(){var e=(0,l.d)(),n=e.modalDataState,t=e.closeModal,a=e.closeModalWithCallback;return(0,c.jsx)(s.Z,{size:"lg",centered:!0,show:n.isOpen,onHide:n.isConfirm?t:a,className:"AlertModal",children:(0,c.jsxs)(u,{children:[(0,c.jsx)(s.Z.Header,{closeButton:!0,children:(0,c.jsx)(s.Z.Title,{children:n.title})}),(0,c.jsx)(s.Z.Body,{children:n.content}),(0,c.jsxs)(s.Z.Footer,{children:[(0,c.jsx)(i.Z,{variant:"secondary",onClick:n.isConfirm?t:a,children:n.isConfirm?"Cancel":"Close"}),(0,c.jsx)(i.Z,{hidden:!n.isConfirm,variant:n.buttonColor,onClick:a,children:"Confirm"})]})]})})}},5331:function(e,n,t){t.d(n,{Z:function(){return o}});t(7313);var a=t(8467),r=t(2135),l=t.p+"static/media/logo.006bdc187418d22db610.png",s=t(6233),i=t(6417),o=function(e){var n=e.title,t=e.userName,o=e.outlet,c=e.isWarningAlert,u=void 0!==c&&c,d=(0,a.s0)(),m=(0,s.d)().openModal;return(0,i.jsx)("header",{className:"Header",children:(0,i.jsx)("nav",{className:"navbar bg-light",children:(0,i.jsxs)("div",{className:"container",children:[(0,i.jsxs)("div",{className:"navbar-brand",children:[(0,i.jsx)("a",{href:"/",onClick:u?function(e){e.preventDefault();m("Warning","Post data will not be saved when you leave the window.",(function(){d("/")}),!0)}:function(e){e.preventDefault(),d("/")},children:(0,i.jsx)("img",{className:"me-2 pe-auto",style:{width:"40px",height:"40px",cursor:"pointer"},src:l,alt:"blog logo"})}),null!==n&&void 0!==n?n:"",t&&(0,i.jsxs)("ul",{className:"navbar-nav hstack gap-3 ms-1",children:[(0,i.jsx)("li",{className:"nav-item",children:(0,i.jsx)(r.rU,{className:"nav-link",to:"".concat(t?"/home/".concat(t):"/"),children:"Home"})}),(0,i.jsx)("li",{className:"nav-item",children:(0,i.jsx)(r.rU,{className:"nav-link",to:"".concat(t?"/home/".concat(t,"/category"):"/"),children:"Category"})}),(0,i.jsx)("li",{className:"nav-item",children:(0,i.jsx)(r.rU,{className:"nav-link disabled",to:"/",children:"Tag"})}),(0,i.jsx)("li",{className:"nav-item",children:(0,i.jsx)(r.rU,{className:"nav-link disabled",to:"/",children:"About"})})]})]}),null!==o&&void 0!==o?o:null]})})})}},2463:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var a=t(4165),r=t(5861),l=t(9439),s=t(7313),i=t(8467),o=t(78),c=t(6233),u=t(973),d=t(2495),m=t(2250),f=t(2885),p=t(1413),h=t(6417),x=function(){var e=(0,o.FV)(u.F),n=(0,l.Z)(e,2),t=n[0],i=n[1],c=(0,s.useState)(""),d=(0,l.Z)(c,2),f=d[0],x=d[1],v=(0,s.useRef)(null);(0,s.useEffect)((function(){t.photoURL&&x(t.photoURL)}),[t.photoURL]);var b=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.uid){e.next=2;break}throw window.alert("no user uid data");case 2:if(n.target.files){e.next=4;break}throw window.alert("no files exist");case 4:return e.next=6,(0,m.bY)(Boolean(t.photoURL),t.uid,n.target.files[0]);case 6:r=e.sent,i((function(e){return(0,p.Z)((0,p.Z)({},e),{},{photoURL:r})}));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,h.jsxs)("div",{className:"ProfileImageEdit px-4 vstack gap-3",style:{flexBasis:"210px"},children:[(0,h.jsx)("img",{className:"img-thumbnail rounded-circle",style:{width:"128px",height:"128px"},src:f,alt:"Profile"}),(0,h.jsx)("input",{hidden:!0,type:"file",accept:"image/*",ref:v,src:f,onChange:b}),(0,h.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){var e;null===(e=v.current)||void 0===e||e.click()},children:"Upload Image"}),(0,h.jsx)("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){var e;null!==(e=v.current)&&void 0!==e&&e.value&&(v.current.value="")},children:"Delete Image"})]})},v=function(){var e=(0,o.FV)(u.F),n=(0,l.Z)(e,2),t=n[0],i=n[1],c=(0,s.useState)(!0),d=(0,l.Z)(c,2),f=d[0],x=d[1],v=(0,s.useState)(""),b=(0,l.Z)(v,2),j=b[0],g=b[1],w=(0,s.useState)(""),k=(0,l.Z)(w,2),y=k[0],N=k[1];(0,s.useEffect)((function(){var e,n;g(null!==(e=t.nickname)&&void 0!==e?e:""),N(null!==(n=t.description)&&void 0!==n?n:"")}),[t]);var C=function(e){var n=e.target,t=n.name,a=n.value;"nickname"===t?g(a):"description"===t&&N(a)},Z=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t.uid){e.next=3;break}throw window.alert("no user uid data");case 3:return e.next=5,(0,m.Lj)(t.uid,j,y);case 5:i((function(e){return(0,p.Z)((0,p.Z)({},e),{},{nickname:j,description:y})})),x(!0);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,h.jsxs)("div",{className:"ProfileInfoEdit container px-4",children:[(0,h.jsxs)("div",{className:"vstack gap-2",hidden:!f,children:[(0,h.jsx)("p",{className:"fs-2 fw-semibold m-0",style:{color:"#111"},children:t.nickname}),(0,h.jsx)("div",{style:{color:"#333"},children:t.description}),(0,h.jsx)("button",{type:"button",className:"btn btn-outline-primary",style:{width:"96px"},onClick:function(){x((function(e){return!e}))},children:"Edit"})]}),(0,h.jsxs)("form",{hidden:f,onSubmit:Z,children:[(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("label",{className:"form-label",children:"Nickname"}),(0,h.jsx)("input",{className:"form-control",type:"text",name:"nickname",placeholder:"nickname",value:j,maxLength:20,onChange:C,required:!0})]}),(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("label",{className:"form-label",children:"Description"}),(0,h.jsx)("input",{className:"form-control",type:"text",name:"description",placeholder:"description",value:y,maxLength:100,onChange:C})]}),(0,h.jsx)("button",{type:"submit",style:{width:"96px"},className:"btn btn-primary",children:"Save"})]})]})},b=function(e){var n=e.title,t=e.description,a=e.buttonMessage,r=e.onClick,l=e.currentData,s=e.buttonColor;return(0,h.jsxs)("div",{className:"SettingData px-3 py-4",style:{borderBottom:"1px solid #eee"},children:[(0,h.jsx)("h3",{className:"d-inline-block fs-5",style:{width:"170px",color:"#111"},children:n}),(0,h.jsx)("span",{style:{color:"#333"},children:l}),(0,h.jsx)("button",{className:"btn btn-".concat(null!==s&&void 0!==s?s:"primary"," float-end"),style:{width:"96px"},onClick:r,children:a}),(0,h.jsx)("p",{className:"mt-2 mb-0",style:{fontSize:"14px",color:"#777"},children:t})]})},j=t(2552),g=t(5331),w=t(769),k=function(){var e=(0,o.FV)(u.F),n=(0,l.Z)(e,2),t=n[0],p=n[1],k=(0,o.sJ)(d.B),y=(0,c.d)(),N=y.openModal,C=y.closeModal,Z=(0,i.s0)(),D=(0,s.useRef)(null),E=(0,s.useRef)(null),S=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N("Email Change",(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("p",{children:"Enter your new email."}),(0,h.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("label",{className:"form-label",children:"Email"}),(0,h.jsx)("input",{className:"form-control",name:"email",type:"string",placeholder:"enter your email",autoComplete:"off",ref:D,required:!0})]}),(0,h.jsx)("label",{className:"form-label",children:"Current Password"}),(0,h.jsx)("input",{className:"form-control",name:"password",type:"password",placeholder:"enter your password",autoComplete:"off",ref:E,required:!0}),(0,h.jsx)("div",{className:"form-text",children:"Password is required when you change email address."})]})]}),(0,r.Z)((0,a.Z)().mark((function e(){var n,r,l,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.uid){e.next=3;break}throw console.log("No userData");case 3:if(null!==(n=D.current)&&void 0!==n&&n.value){e.next=5;break}return e.abrupt("return");case 5:if(l=D.current.value,null!==(r=E.current)&&void 0!==r&&r.value){e.next=8;break}return e.abrupt("return");case 8:return s=E.current.value,e.next=11,(0,w.cJ)(l,s);case 11:C(),p({isLoggedIn:!1}),N("Email update complete","Please complete email verification if you want to login",(function(){return Z("/")})),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),e.t0&&console.log(e.t0),N("Error","Withdrawal failed");case 20:case"end":return e.stop()}}),e,null,[[0,16]])}))),!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=(0,s.useRef)(null),M=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N("Warning",(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("p",{children:"Please enter your password if you really want leave."}),(0,h.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[(0,h.jsx)("label",{className:"form-label",children:"Password"}),(0,h.jsx)("input",{className:"form-control",name:"password",type:"password",placeholder:"enter your password",autoComplete:"off",ref:B,required:!0})]})]}),(0,r.Z)((0,a.Z)().mark((function e(){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.uid){e.next=2;break}throw console.log("No userData");case 2:if(null!==(n=B.current)&&void 0!==n&&n.value){e.next=4;break}return e.abrupt("return");case 4:return r=B.current.value,e.prev=5,e.next=8,(0,m.af)(t.uid,r);case 8:C(),p({isLoggedIn:!1}),N("Withdrawal complete","Your withdrawal has been completed",(function(){return Z("/")})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),e.t0&&console.log(e.t0),N("Error","Withdrawal failed");case 17:case"end":return e.stop()}}),e,null,[[5,13]])}))),!0,"danger");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,h.jsxs)(h.Fragment,{children:[k?(0,h.jsx)(f.Z,{}):null,(0,h.jsx)(j.Z,{}),(0,h.jsx)(g.Z,{title:"Setting"}),(0,h.jsxs)("main",{className:"EditProfile",children:[(0,h.jsx)("section",{className:"py-4 col col-lg-10 offset-lg-1 col-xxl-8 offset-xxl-2",children:(0,h.jsxs)("div",{className:"hstack",children:[(0,h.jsx)(x,{}),(0,h.jsx)("div",{className:"vr"}),(0,h.jsx)(v,{})]})}),(0,h.jsx)("hr",{className:"col col-lg-10 offset-lg-1 col-xxl-8 offset-xxl-2"}),(0,h.jsxs)("section",{className:"col col-lg-10 offset-lg-1 col-xxl-8 offset-xxl-2",children:[(0,h.jsx)(b,{title:"Email address",description:"Email address that receives authentication or notification. ",buttonMessage:"Change",currentData:t.email,onClick:S}),(0,h.jsx)(b,{title:"Withdrawal",description:"All posts and comments you created upon withdrawal will be deleted and will not be recovered. ",buttonMessage:"Quit",buttonColor:"danger",onClick:M})]})]})]})}},6233:function(e,n,t){t.d(n,{d:function(){return u}});var a=t(4165),r=t(5861),l=t(9439),s=t(7313),i=t(78),o=t(6417),c=(0,i.cn)({key:"modalState",default:{isOpen:!1,title:"",content:"",closeCallBack:function(){},isConfirm:!1,buttonColor:"primary"}}),u=function(){var e=(0,i.FV)(c),n=(0,l.Z)(e,2),t=n[0],u=n[1],d=(0,s.useCallback)((function(e,n,t,a,r){u({isOpen:!0,title:e,content:"string"===typeof n?(0,o.jsx)("p",{children:n}):n,closeCallBack:t,isConfirm:null!==a&&void 0!==a&&a,buttonColor:null!==r&&void 0!==r?r:"primary"})}),[u]),m=(0,s.useCallback)((function(){u({isOpen:!1,title:"",content:"",closeCallBack:function(){},isConfirm:!1,buttonColor:"primary"})}),[u]),f=(0,s.useCallback)((0,r.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u({isOpen:!1,title:"",content:"",closeCallBack:function(){},isConfirm:!1,buttonColor:"primary"}),!t.closeCallBack){e.next=4;break}return e.next=4,t.closeCallBack();case 4:case"end":return e.stop()}}),e)}))),[t,u]);return{modalDataState:t,openModal:d,closeModal:m,closeModalWithCallback:f}}}}]);