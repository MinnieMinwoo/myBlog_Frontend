"use strict";(self.webpackChunkmyblog_frontend=self.webpackChunkmyblog_frontend||[]).push([[52],{8052:function(e,n,t){t.r(n);var r=t(4165),a=t(5861),c=t(9439),s=t(3433),o=t(7313),u=t(8467),i=t(78),l=t(2495),d=t(1921),f=t(2250),p=t(3167),h=t(9235),m=t(4646),v=t(9105),b=t(6417),x=function(){return(0,b.jsxs)("div",{"aria-hidden":"true",children:[(0,b.jsx)("section",{className:"w-100 bg-secondary px-4 mb-4",style:{height:"340px"},children:(0,b.jsxs)("div",{style:{paddingTop:"140px"},children:[(0,b.jsx)("h2",{className:"placeholder d-block col-5"}),(0,b.jsx)("p",{className:"placeholder col-4"})]})}),(0,s.Z)(Array(3)).map((function(e,n){return(0,b.jsxs)("div",{className:"mb-3 d-flex vstack gap-1 placeholder-wave placeholder-lg",children:[(0,b.jsx)("hr",{}),(0,b.jsx)("h3",{className:"placeholder col-3 bg-secondary"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"placeholder col-11 bg-secondary"}),(0,b.jsx)("p",{className:"placeholder col-12 bg-secondary"}),(0,b.jsx)("p",{className:"placeholder col-8 bg-secondary"})]}),(0,b.jsx)("span",{className:"placeholder col-2 bg-secondary"})]},n)}))]})};n.default=function(){var e=(0,i.FV)(l.B),n=(0,c.Z)(e,2),t=n[0],g=n[1],Z=(0,o.useState)(""),w=(0,c.Z)(Z,2),y=w[0],k=w[1],j=(0,o.useState)([]),N=(0,c.Z)(j,2),O=N[0],L=N[1],F=(0,o.useState)(0),T=(0,c.Z)(F,2),U=T[0],C=T[1],J=(0,d.p)().openToast,P=(0,u.UO)(),I=(0,o.useState)(!1),R=(0,c.Z)(I,2),B=R[0],D=R[1],S=(0,o.useState)(!1),E=(0,c.Z)(S,2),A=E[0],M=E[1],V=(0,o.useRef)(),H=(0,o.useRef)(null),z=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,c,o,u,i,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=P.userID,a=P.mainName,c=P.subName,t&&a&&c){e.next=3;break}return e.abrupt("return");case 3:if(n[0].isIntersecting&&V.current){e.next=5;break}return e.abrupt("return");case 5:if(!B&&!A){e.next=7;break}return e.abrupt("return");case 7:return D(!0),e.next=10,(0,f.d3)(t);case 10:return o=e.sent,e.next=13,(0,h.yB)(o,a,c,V.current);case 13:u=e.sent,i=u.index,l=u.data,L((function(e){return[].concat((0,s.Z)(e),(0,s.Z)(l))})),V.current=i,10!==l.length&&M(!0),D(!1);case 20:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Q=new IntersectionObserver(z,{root:null,rootMargin:"100px",threshold:.1});return(0,o.useEffect)((function(){g(!0);var e=P.mainName,n=P.subName;if(!(P.userID&&e&&n))throw console.log("no params");(0,f.d3)(P.userID).then(function(){var t=(0,a.Z)((0,r.Z)().mark((function t(a){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,m.dZ)(a,e,n).then((function(e){return k(e)})),(0,h.s$)(a,e,n).then((function(e){return C(e)})),(0,h.yB)(a,e,n).then((function(e){var n=e.data,t=e.index;L(n),V.current=t,10!==n.length&&M(!0)}))]);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e),J("Error","Post loading failed.","warning")})).finally((function(){H.current&&Q.observe(H.current),console.log(H.current),g(!1)}))}),[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.Z,{}),t?(0,b.jsx)(x,{}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("main",{className:"read_section",hidden:t,children:[(0,b.jsxs)("section",{className:"bg-image w-100 bg-opacity-50 px-4 mb-4",style:{height:"340px",backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)),\n            url(".concat(y,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundColor:"rgba(255, 255, 255, 0.5)"},children:[(0,b.jsx)("h2",{className:"fs-1 fw-middle mb-3 text-white",style:{paddingTop:"140px"},children:"".concat(P.mainName," - ").concat(P.subName)}),(0,b.jsx)("span",{className:"fs-5 text-white",children:"".concat(U," ").concat(O.length&&1!==O.length?"posts":"post")})]}),(0,b.jsx)(v.Z,{postList:O})]}),A||t?null:(0,b.jsx)("div",{className:"spinner-border text-secondary",style:{marginLeft:"47%"},ref:H,role:"status",children:(0,b.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]})]})}},9105:function(e,n,t){t(7313);var r=t(8467),a=t(2135),c=t(78),s=t(2495),o=t(8433),u=t(6417);n.Z=function(e){var n=e.postList,t=(0,r.UO)(),i=(0,c.sJ)(s.B);return(0,u.jsx)("article",{className:"PostItemList vstack",hidden:i,children:n.map((function(e){return(0,u.jsx)("div",{className:"w-100",children:(0,u.jsx)(a.rU,{className:"PostItem px-0 py-4 d-flex text-decoration-none",style:{borderTop:"1px solid #eee"},to:"/home/".concat(t.userID,"/").concat(e.id),children:(0,u.jsxs)("div",{className:"vstack gap-1",children:[""!==e.thumbnailImageURL?(0,u.jsx)("div",{children:(0,u.jsx)("img",{className:"img-fluid w-100 mb-3",style:{aspectRatio:"16 / 9",objectFit:"cover"},src:e.thumbnailImageURL,alt:"post"})}):null,(0,u.jsx)("h3",{className:"overflow-hidden fw-semibold",style:{color:"#111"},children:e.title}),(0,u.jsx)("p",{className:"mb-1 text-break",style:{color:"#555"},children:e.thumbnailData}),(0,u.jsx)("span",{style:{color:"#999",fontSize:"14px"},children:(0,o.Z)(e.createdAt)})]})},e.id)},e.id)}))})}},3167:function(e,n,t){var r,a=t(168),c=(t(7313),t(6968)),s=t(1921),o=t(244),u=t(6417),i=(0,o.ZP)(c.Z)(r||(r=(0,a.Z)(["\n  position: absolute;\n  top: 70px;\n  right: 40px;\n  z-index: 5;\n"])));n.Z=function(){var e=(0,s.p)(),n=e.toastDataState,t=e.closeToast;return(0,u.jsxs)(i,{onClose:function(){t()},show:n.isOpen,bg:n.background,delay:3e3,autohide:!0,children:[(0,u.jsx)(c.Z.Header,{closeButton:!1,children:(0,u.jsx)("strong",{className:"me-auto",children:n.title})}),(0,u.jsx)(c.Z.Body,{children:n.content})]})}},8433:function(e,n){n.Z=function(e){var n=new window.Date(e),t=n.getFullYear(),r=("0"+(1+n.getMonth())).slice(-2),a=("0"+n.getDate()).slice(-2);return"".concat(t,". ").concat(r,". ").concat(a)}},4646:function(e,n,t){t.d(n,{AT:function(){return l},FH:function(){return v},Ok:function(){return f},SV:function(){return b},YO:function(){return h},c2:function(){return m},dZ:function(){return d},mR:function(){return p},sk:function(){return x},yR:function(){return g}});var r=t(3433),a=t(4165),c=t(5861),s=t(935),o=t(450),u=t(4766),i=t(7657),l=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var t,r,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,s.JU)(o.wO,"users/".concat(n,"/category"),n),e.prev=1,e.next=4,(0,s.QT)(t);case 4:if(null!==(r=e.sent.data())&&void 0!==r&&r.order&&Array.isArray(null===r||void 0===r?void 0:r.order)){e.next=7;break}return e.abrupt("return",[]);case 7:return u=[],e.next=10,Promise.all(r.order.map(function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t){var r,c,i,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,s.JU)(o.wO,"users/".concat(n,"/category"),t),e.next=3,(0,s.QT)(i);case 3:l=e.sent.data(),u.push({mainField:t,subField:null!==(r=null===l||void 0===l?void 0:l.subfield)&&void 0!==r?r:[],thumbnailLink:null!==(c=null===l||void 0===l?void 0:l.thumbnailLink)&&void 0!==c?c:[]});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 10:return e.abrupt("return",u);case 13:return e.prev=13,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(n){return e.apply(this,arguments)}}(),d=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n,t,r){var c,u,i,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=(0,s.JU)(o.wO,"users/".concat(n,"/category"),t),e.prev=1,e.next=4,(0,s.QT)(c);case 4:if(null!==(u=e.sent.data())&&void 0!==u&&u.subfield&&null!==u&&void 0!==u&&u.thumbnailLink){e.next=7;break}return e.abrupt("return","");case 7:return i=u.subfield,l=u.thumbnailLink,e.abrupt("return",-1!==i.indexOf(r)?l[i.indexOf(r)]:"");case 11:return e.prev=11,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n,t,r){return e.apply(this,arguments)}}(),f=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n,t){var r,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=(0,s.JU)(o.wO,"users/".concat(t,"/category"),"".concat(t)),c=(0,s.JU)(o.wO,"users/".concat(t,"/category"),"".concat(n)),e.next=5,(0,s.r7)(r,{order:(0,s.vr)(n)});case 5:return e.next=7,(0,s.pl)(c,{subfield:[],thumbnailLink:[]});case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n,t){return e.apply(this,arguments)}}(),p=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n,t,c){var u,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(u={mainField:n.mainField,subField:(0,r.Z)(n.subField),thumbnailLink:(0,r.Z)(n.thumbnailLink)}).subField.push(t),u.thumbnailLink.push(""),console.log(u),e.prev=4,i=(0,s.JU)(o.wO,"users/".concat(c,"/category"),"".concat(u.mainField)),e.next=8,(0,s.pl)(i,{subfield:u.subField,thumbnailLink:u.thumbnailLink});case 8:e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(4),e.t0;case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(n,t,r){return e.apply(this,arguments)}}(),h=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n,t){var r,c,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=(0,s.IO)((0,s.hJ)(o.wO,"posts"),(0,s.ar)("createdBy","==",t),(0,s.ar)("category","array-contains",n)),e.next=4,(0,s.PL)(r);case 4:return e.sent.forEach((function(e){e.data().category[0]===n&&(0,s.r7)((0,s.JU)(o.wO,"posts",e.id),{category:[]})})),c=(0,s.JU)(o.wO,"users/".concat(t,"/category"),"".concat(t)),u=(0,s.JU)(o.wO,"users/".concat(t,"/category"),"".concat(n)),e.next=10,(0,s.r7)(c,{order:(0,s.Ab)(n)});case 10:return e.next=12,(0,s.oe)(u);case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(n,t){return e.apply(this,arguments)}}(),m=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n,t,r){var c,u,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={mainField:n.mainField,subField:[],thumbnailLink:[]},n.subField.forEach((function(e,r){e!==t&&(c.subField.push(e),c.thumbnailLink.push(n.thumbnailLink[r]))})),e.prev=2,u=(0,s.IO)((0,s.hJ)(o.wO,"posts"),(0,s.ar)("createdBy","==",r),(0,s.ar)("category","==",[n.mainField,t])),e.next=6,(0,s.PL)(u);case 6:return e.sent.forEach((function(e){(0,s.r7)((0,s.JU)(o.wO,"posts",e.id),{category:[]})})),i=(0,s.JU)(o.wO,"users/".concat(r,"/category"),"".concat(c.mainField)),e.next=11,(0,s.r7)(i,{subfield:c.subField,thumbnailLink:c.thumbnailLink});case 11:return e.abrupt("return",c);case 14:throw e.prev=14,e.t0=e.catch(2),e.t0;case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(n,t,r){return e.apply(this,arguments)}}(),v=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n,t,r,c){var u,i,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=t.mainField,e.prev=1,e.next=4,h(u,c);case 4:return i=(0,s.JU)(o.wO,"users/".concat(c,"/category"),"".concat(c)),l=(0,s.JU)(o.wO,"users/".concat(c,"/category"),"".concat(r)),e.next=8,(0,s.r7)(i,{order:n});case 8:return e.next=10,(0,s.pl)(l,{subfield:t.subField,thumbnailLink:t.thumbnailLink});case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(1),e.t0;case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(n,t,r,a){return e.apply(this,arguments)}}(),b=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n,t,r,c){var u,i,l,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.mainField,i=n.subField,l=i.map((function(e){return e===t?r:e})),e.prev=2,d=(0,s.JU)(o.wO,"users/".concat(c,"/category"),"".concat(u)),e.next=6,(0,s.r7)(d,{subfield:l});case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(2),e.t0;case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(n,t,r,a){return e.apply(this,arguments)}}(),x=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,i.T)(n,"$category/".concat((0,u.k$)())));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n,t,r){var c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=(0,s.JU)(o.wO,"users/".concat(r,"/category"),"".concat(t)),e.next=4,(0,s.r7)(c,{thumbnailLink:n});case 4:e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(n,t,r){return e.apply(this,arguments)}}()},1921:function(e,n,t){t.d(n,{p:function(){return u}});var r=t(1413),a=t(9439),c=t(7313),s=t(78),o=(0,s.cn)({key:"toastState",default:{isOpen:!1,title:"",content:"",background:"primary"}}),u=function(){var e=(0,s.FV)(o),n=(0,a.Z)(e,2),t=n[0],u=n[1];return{toastDataState:t,openToast:(0,c.useCallback)((function(e,n,t){u({isOpen:!0,title:e,content:n,background:null!==t&&void 0!==t?t:"primary"})}),[u]),closeToast:(0,c.useCallback)((function(){u((function(e){return(0,r.Z)((0,r.Z)({},e),{},{isOpen:!1})}))}),[u])}}},6968:function(e,n,t){t.d(n,{Z:function(){return C}});var r=t(1413),a=t(5987),c=t(7313),s=t(6123),o=t.n(s),u=t(7901),i=t(2891),l=Math.pow(2,31)-1;function d(e,n,t){var r=t-Date.now();e.current=r<=l?setTimeout(n,r):setTimeout((function(){return d(e,n,t)}),l)}function f(){var e=(0,u.Z)(),n=(0,c.useRef)();return(0,i.Z)((function(){return clearTimeout(n.current)})),(0,c.useMemo)((function(){var t=function(){return clearTimeout(n.current)};return{set:function(r,a){void 0===a&&(a=0),e()&&(t(),a<=l?n.current=setTimeout(r,a):d(n,r,Date.now()+a))},clear:t}}),[])}var p,h=t(4942),m=t(8588),v=t(7131),b=t(6417),x=(p={},(0,h.Z)(p,m.d0,"showing"),(0,h.Z)(p,m.Ix,"showing show"),p),g=c.forwardRef((function(e,n){return(0,b.jsx)(v.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:n,transitionClasses:x}))}));g.displayName="ToastFade";var Z=g,w=t(3813),y=t(8524),k=t(2729),j=c.createContext({onClose:function(){}}),N=["bsPrefix","closeLabel","closeVariant","closeButton","className","children"],O=c.forwardRef((function(e,n){var t=e.bsPrefix,s=e.closeLabel,u=e.closeVariant,i=e.closeButton,l=e.className,d=e.children,f=(0,a.Z)(e,N);t=(0,y.vE)(t,"toast-header");var p=(0,c.useContext)(j),h=(0,w.Z)((function(e){null==p||null==p.onClose||p.onClose(e)}));return(0,b.jsxs)("div",(0,r.Z)((0,r.Z)({ref:n},f),{},{className:o()(t,l),children:[d,i&&(0,b.jsx)(k.Z,{"aria-label":s,variant:u,onClick:h,"data-dismiss":"toast"})]}))}));O.displayName="ToastHeader",O.defaultProps={closeLabel:"Close",closeButton:!0};var L=O,F=(0,t(8864).Z)("toast-body"),T=["bsPrefix","className","transition","show","animation","delay","autohide","onClose","bg"],U=c.forwardRef((function(e,n){var t=e.bsPrefix,s=e.className,u=e.transition,i=void 0===u?Z:u,l=e.show,d=void 0===l||l,p=e.animation,h=void 0===p||p,m=e.delay,v=void 0===m?5e3:m,x=e.autohide,g=void 0!==x&&x,w=e.onClose,k=e.bg,N=(0,a.Z)(e,T);t=(0,y.vE)(t,"toast");var O=(0,c.useRef)(v),L=(0,c.useRef)(w);(0,c.useEffect)((function(){O.current=v,L.current=w}),[v,w]);var F=f(),U=!(!g||!d),C=(0,c.useCallback)((function(){U&&(null==L.current||L.current())}),[U]);(0,c.useEffect)((function(){F.set(C,O.current)}),[F,C]);var J=(0,c.useMemo)((function(){return{onClose:w}}),[w]),P=!(!i||!h),I=(0,b.jsx)("div",(0,r.Z)((0,r.Z)({},N),{},{ref:n,className:o()(t,s,k&&"bg-".concat(k),!P&&(d?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"}));return(0,b.jsx)(j.Provider,{value:J,children:P&&i?(0,b.jsx)(i,{in:d,unmountOnExit:!0,children:I}):I})}));U.displayName="Toast";var C=Object.assign(U,{Body:F,Header:L})}}]);